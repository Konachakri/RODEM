<p>company works!</p>
<h2>Create Company Form</h2>
<div>
    <form [formGroup]="companyForm">
        <label for="">Name:</label>
        <input type="name" formControlName="name">
        <div *ngIf="companyForm.get('name')?.touched && companyForm.get('name')?.invalid">
            <p class="class" *ngIf="companyForm.get('name')?.errors?.['required']">Name is required</p>
            <p class="class" *ngIf="companyForm.get('name')?.errors?.['minlength']">Minimum 4 characters required</p>
            <p class="class" *ngIf="companyForm.get('name')?.errors?.['maxlength']">Maximum 10 characters allowed</p>
        </div>
        <label for="">Founded:</label>
        <input type="date" formArrayName="founded">

        <label for="">CEO:</label>
        <input type="name" formControlName="ceo">
        
        <div *ngIf="companyForm.get('ceo')?.touched && companyForm.get('ceo')?.invalid">
            <p class="class" *ngIf="companyForm.get('ceo')?.errors?.['required']">ceo is required</p>
            <p class="class" *ngIf="companyForm.get('ceo')?.errors?.['minlength']">Minimum 4 characters required</p>
            <p class="class" *ngIf="companyForm.get('ceo')?.errors?.['maxlength']">Maximum 10 characters allowed</p>
        </div>

        <div formGroupName="location">
            <label for="">Address:</label>
            <input type="text" formControlName="address">
            <div *ngIf="companyForm.get('location')?.get('address')?.touched && companyForm.get('location')?.get('address')?.invalid">
                <p class="class" *ngIf="companyForm.get('location')?.get('address')?.errors?.['required']">Adress is required</p>
            </div>
            <label for="">City:</label>
            <input type="text" formControlName="city">
            <div *ngIf="companyForm.get('location')?.get('city')?.touched && companyForm.get('location')?.get('city')?.invalid">
                <p class="class" *ngIf="companyForm.get('location')?.get('city')?.errors?.['required']">City is required</p>
            </div>
            <label for="">Zipcode:</label>
            <input type="number" formControlName="zipcode">
            <div *ngIf="companyForm.get('location')?.get('zipcode')?.touched && companyForm.get('location')?.get('zipcode')?.invalid">
                <p class="class" *ngIf="companyForm.get('location')?.get('zipcode')?.errors?.['required']">Zipcode is required</p>
            </div>
            <label for="">Country:</label>
            <input type="text" formControlName="country">
            <div *ngIf="companyForm.get('location')?.get('country')?.touched && companyForm.get('location')?.get('country')?.invalid">
                <p class="class" *ngIf="companyForm.get('location')?.get('country')?.errors?.['required']">Country is required</p>
            </div>
        </div>
        <div>
            <label for="">Departments:</label>
            <button (click)="addDepartments()">Add Departments:</button>
        </div>
        <br>
        <div formArrayName="departments">
            <div *ngFor="let department of departmentsFormArray.controls; let i=index">
                <div formGroupName="{{i}}">
                    <h3>Department:{{i+1}}</h3>
                    <label>Name:</label>
                    <input type="text" formControlName="name">
                    <div *ngIf="departmentsFormArray.controls[i].get('name')?.touched && departmentsFormArray.controls[i].get('name')?.invalid">
                        <p class="class" *ngIf="departmentsFormArray.controls[i].get('name')?.errors?.['required']">Name is required</p>
                    </div>
                    <label for="">Head:</label>
                    <input type="text" formControlName="head">
                    <div *ngIf="departmentsFormArray.controls[i].get('head')?.touched && departmentsFormArray.controls[i].get('head')?.invalid">
                        <p class="class" *ngIf="departmentsFormArray.controls[i].get('head')?.errors?.['required']">Head is required</p>
                    </div>
                    <label for="">Employees:</label>
                    <input type="number" formControlName="employees">
                    <div *ngIf="departmentsFormArray.controls[i].get('employees')?.touched && departmentsFormArray.controls[i].get('employees')?.invalid">
                        <p class="class" *ngIf="departmentsFormArray.controls[i].get('employees')?.errors?.['required']">employees is required</p>
                    </div>
                    <label for="">Budget:</label>
                    <input type="number" formControlName="budget">
                    <div *ngIf="departmentsFormArray.controls[i].get('budget')?.touched && departmentsFormArray.controls[i].get('budget')?.invalid">
                        <p class="class" *ngIf="departmentsFormArray.controls[i].get('budget')?.errors?.['required']">Budget is require</p>
                    </div>

                    <button (click)="deletedp(i)">Delete Department</button>
                </div>
            </div>
        </div>
        <br>
        <div class="radio">
            <label for="">Type:</label>
            <input type="radio" name="type" value="service" formControlName="type">
            <label for="">service:</label>
            <input type="radio" name="type" value="product" formControlName="type">
            <label for="">Product:</label>
        
        </div>
        <br>
        <div *ngIf="companyForm.get('type')?.value=='service'">
            <label for="">Client Name:</label>
            <input type="text" formControlName="client name">

            <div *ngIf="companyForm.get('client name')?.touched && companyForm.get('client name')?.invalid">
                <p class="class" *ngIf="companyForm.get('client name')?.errors?.['required']">Client name is required</p>
            </div>
        </div>
        <br>
        <div *ngIf="companyForm.get('type')?.value=='product'">
            <label for="">Product Name:</label>
            <input type="text" formControlName="product name">

            <div *ngIf="companyForm.get('product name')?.touched && companyForm.get('product name')?.invalid">
                <p class="class" *ngIf="companyForm.get('product name')?.errors?.['required']">Product name is required</p>
            </div>
        </div>
        <br>


        <button (click)="submit()">Submit</button>
    </form>
</div>